<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>voice</title>
</head>
<body>

<h1>声音库</h1>
<h2><a href="http://www.rongcloud.cn/docs/web.html#声音库">http://www.rongcloud.cn/docs/web.html#声音库</a></h2>

<video src="" controls id="a"></video>
<audio src="" controls id="b"></audio>

<script src="//cdn.ronghub.com/Libamr-2.2.5.min.js"></script>
<script src="//cdn.ronghub.com/RongIMVoice-2.2.5.min.js"></script>

<!-- 引入base64编码的mar音频数据 -->
<script src="./voice-amr-base64.json"></script>
<script>
var RongIMVoice = RongIMLib.RongIMVoice;

RongIMVoice.init();

function play(){
	// 音频持续大概时间(秒)
	var duration = voice.length/1024;

	RongIMVoice.preLoaded(voice,function(){
	    RongIMVoice.play(voice,duration);
	});
}

// alert(getBlobUrl(voice));
function getBlobUrl(file){
  var url = "";
  if(window.createObjectURL){
    url = window.createObjectURL(file);
  }else if(window.createBlobURL){
    url = window.createBlobURL(file);
  }else if(window.URL && window.URL.createObjectURL){
    url = window.URL.createObjectURL(file);     //chrome,firefox
  }else if(window.webkitURL && window.webkitURL.createObjectURL){
    url = window.webkitURL.createObjectURL(file);   //safari
  } 
  return url;
}
</script>

<button onclick="play()">播放base64</button>
</body>
</html>
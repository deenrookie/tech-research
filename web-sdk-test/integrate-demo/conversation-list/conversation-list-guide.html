<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>会话列表 集成引导</title>
</head>
<link rel="stylesheet" href="../../res/integrate.css">
<body>
<div class="wrap">
    <h1>会话列表 集成引导</h1>

	<br>
	<p>API 文档 : <a href="http://www.rongcloud.cn/docs/web_api_demo.html#conversation">http://www.rongcloud.cn/docs/web_api_demo.html#conversation</a></p>
	<p>集成 demo : <a href="https://shuise.github.io/tech-research/web-sdk-test/integrate-demo/conversation-list/conversation-list.html">https://shuise.github.io/tech-research/web-sdk-test/integrate-demo/conversation-list/conversation-list.html</a></p>
	<br>
    <div class="guide">
        <div class="steps">
            <h2>1.用户登录成功后，获取 appKey，token，链接云端</h2>
            <div class="content">
				<br>
				<p>模拟的用户及群组信息数据 : <a href="https://github.com/shuise/tech-research/blob/master/web-sdk-test/integrate-demo/conversation-list/conversation-list.json">https://github.com/shuise/tech-research/blob/master/web-sdk-test/integrate-demo/conversation-list/conversation-list.json</a> 中的 "userInfos,groupInfos"</p>
				<br>
				<p>调用 init() 初始化，链接云端</p>
            </div>
        </div>

		<div class="steps">
			<h2>2.获取会话列表，处理会话列表（拼接应用服务器提供的用户或群组信息），渲染会话列表</h2>
			<div class="content">
				<br>
				<p>模拟的会话列表数据 : <a href="https://github.com/shuise/tech-research/blob/master/web-sdk-test/integrate-demo/conversation-list/conversation-list.json">https://github.com/shuise/tech-research/blob/master/web-sdk-test/integrate-demo/conversation-list/conversation-list.json</a> 中的 "conversation"</p>
				<p>拼接后会话列表数据 : <a href="https://github.com/shuise/tech-research/blob/master/web-sdk-test/integrate-demo/conversation-list/conversation-list.json">https://github.com/shuise/tech-research/blob/master/web-sdk-test/integrate-demo/conversation-list/conversation-list.json</a> 中的 "translate-conversation"</p>
				<br>

<pre>
//同步会话列表
//@param  {ResultCallback} callback 返回值，参数回调
//@param {array} conversationTypes 可选参数，可以获取指定会话类型的会话，默认请传null
instance.getConversationList({
	onSuccess: function (conversation) {
		//处理会话列表
		transConversations(conversation, function (conversation) {
			//渲染会话列表
			renderConversationView(conversation,instance);
		})
	}
}, null);
</pre>
			</div>
		</div>


		<div class="steps">
			<h2>3.删除指定会话/清除会话列表</h2>
			<div class="content">
				<br>


<pre>
instance.removeConversation(conversationType,targetId,{
	onSuccess:function(bool){
		//删除会话成功。
		console.log(bool);
	},
	onError:function(error){
		// error => 删除会话的错误码
		console.log(error);
	}
});
</pre>
			</div>
		</div>
	</div>

</div>


</body>
</html>
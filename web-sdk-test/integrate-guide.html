<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>集成 引导</title>
</head>
<link rel="stylesheet" href="res/integrate.css">
<body>

<div class="wrap">
	<h1>WebIM 集成引导</h1>
	
	<div class="guide">
		<div class="steps">
			<h2>1. 准备工作</h2>
			<div class="content">
				<p>了解结构说明：<a href="http://www.rongcloud.cn/docs/quick_start.html#架构介绍">http://www.rongcloud.cn/docs/quick_start.html#架构介绍</a></p>
				<p>
					搭建应用服务器：
					<a href="https://github.com/sealtalk/sealtalk-server">https://github.com/sealtalk/sealtalk-server</a> <br>
					Server开发文档  <a href="http://www.rongcloud.cn/docs/server.html">http://www.rongcloud.cn/docs/server.html</a>
				</p>
			</div>
		</div>

		<div class="steps">
			<h2>2. 自行设计UI并做好页面</h2>
			<div class="content">
				接下来以介绍 “会话列表”和“聊天窗口”的具体实现
<pre>&lt;script id="conversation" type="template">
&lt;div class="conversationItem">
{avatar} {name} {leatestMesage}
&lt;/div>
&lt;/script>
</pre>
			</div>
		</div>

		<div class="steps">
			<h2>3. 引入SDK，并完成初始化，链接融云服务器</h2>
			<div class="content">
				文档：<a href="http://www.rongcloud.cn/docs/web.html">http://www.rongcloud.cn/docs/web.html</a> <br>
				参考：<a href="https://shuise.github.io/tech-research/web-sdk-test/token-check.html">https://shuise.github.io/tech-research/web-sdk-test/token-check.html</a>
			</div>
		</div>

		<div class="steps">
			<h2>4. 会话列表的实现</h2>
			<div class="content">
				文档：<a href="http://www.rongcloud.cn/docs/web.html#同步会话列表">http://www.rongcloud.cn/docs/web.html#同步会话列表</a> （请注意一定要开启 历史消息云存储功能） <br>
				参考：<a href="https://shuise.github.io/tech-research/web-sdk-test/web-sdk-test.html">https://shuise.github.io/tech-research/web-sdk-test/web-sdk-test.html</a>
				<p>
					会话列表的数据分两部分，一部分是会话列表（包含最后一条消息），SDK提供了 getConversationList方法获取数据；
					另外一部分是会话对象（联系人，群等）的基本信息，需要应用服务器提供接口
				</p>
<pre>var conversation = [
	{
		"conversationTitle": "",
		"conversationType": 1,
		"latestMessage": {
			"content": {
				"messageName": "TextMessage",
				"content": "hello message content",
				"extra": "RongCloud"
			},
			"conversationType": 1,
			"objectName": "RC:TxtMsg",
			"messageDirection": 1,
			"messageId": "1_15814",
			"receivedStatus": 0,
			"receivedTime": 1489567579394,
			"senderUserId": "user8",	//此id对应发送者
			"sentTime": 1489566164555,
			"targetId": "user9",
			"messageType": "TextMessage",
			"messageUId": "5DD2-3V69-C43A-D3EE",
			"offLineMessage": true
		},
		"latestMessageId": "1_15814",
		"notificationStatus": 0,
		"receivedStatus": 0,
		"receivedTime": 1489567579395,
		"sentTime": 1489566164555,
		"targetId": "user9",
		"unreadMessageCount": 0
	}
];

//实际项目里应该从应用服务器获取，群组信息同理
var userInfos = {
	"user8" : {
		"avatar" : "http://rongcloud.cn/images/newVersion/log_wx.png",
		"name" : "John",
		"other props" : ""
	}
};

conversation.forEach(function(item){
	item["userInfo"] = userInfos[item.latestMessage.senderUserId]
});
</pre>
			</div>
		</div>

		<div class="steps">
			<h2>5. 聊天窗口的实现</h2>
			<div class="content">
				文档： http://www.rongcloud.cn/docs/web.html#获取历史消息
						http://www.rongcloud.cn/docs/web.html#发送消息
				<p>聊天窗口由两部分组成，历史消息的列表以及发送消息的窗口，SDK提供了两个对应的方法，getHistroyMessage，sendMessage，消息旁的用户信息与会话列表处理方式一致</p>
				<pre>
					
				</pre>
			</div>
		</div>
	</div>
</div>



<!--  
1：架构说明，收费服务说明，两个链接
		AppServer https://github.com/sealtalk/sealtalk-server
		Server开发文档  http://www.rongcloud.cn/docs/server.html
	2：基本主要的流程
		引入SDK，初始化，监听消息，链接服务器，收发消息，会话，历史消息
	3：所有API的文档和调用示例
		https://shuise.github.io/tech-research/web-sdk-test/web-sdk-test.html
		http://www.rongcloud.cn/docs/api/js/index.html
	4：各种扩展，组件
		表情库 http://www.rongcloud.cn/docs/web.html#表情库
		声音库 http://www.rongcloud.cn/docs/web.html#声音库
		上传组件 http://www.rongcloud.cn/docs/web.html#上传插件
		商量个约定：技术解决方案都叫组件，业务解决方案才叫插件，行么？
	5：各种产品demo，插件
		聊天插件 http://www.rongcloud.cn/docs/web.html#聊天插件
		客服插件 http://www.rongcloud.cn/docs/web.html#客服插件
		VoIP  http://www.rongcloud.cn/docs/web.html#音视频服务
		IM（Web+PC）
-->

</body>
</html>